---
title: "Menadione tn-seq analysis"
output: html_notebook
---

Date: 30 April, 2023

Author: Jennifer J. Stiens [j.j.stiens\@gmail.com](mailto:j.j.stiens@gmail.com){.email}

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
i_am("Sharon_lab.Rproj")

library(here)
library(tidyverse)

```
Jupyter notebook for all transit work on thoth
/d/in16/u/sj003/men_tnseq/


```{bash}
cd /d/in16/u/sj003/men_tnseq/scripts
module load python/v3
jupyter notebook

```


The Jupyter Notebook is running at:
http://localhost:8888/?token=abea0d3eb63d961564183973d45381816e2d36f9a262fbce
but doesn't show in browser window.

https://docs.anaconda.com/free/anaconda/jupyter-notebooks/remote-jupyter-notebook/

to run on default port from remote server, on the remote server:

```{bash}
jupyter notebook --no-browser

jupyter notebook --no-browser --port=8881 --ip=0.0.0.0

jupyter notebook --no-browser --port=8889

```



Serving notebooks from local directory: /d/in16/u/sj003/men_tnseq/scripts
[I 15:03:41.570 NotebookApp] The Jupyter Notebook is running at:
[I 15:03:41.570 NotebookApp] http://localhost:8888/?token=e0e239d75409ae9cae31f2989eff4dbea7b771e596bbaea6
[I 15:03:41.570 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 15:03:41.573 NotebookApp] 
    
    To access the notebook, open this file in a browser:
        file:///run/user/3880/jupyter/nbserver-15352-open.html
    Or copy and paste one of these URLs:
        http://localhost:8888/?token=e0e239d75409ae9cae31f2989eff4dbea7b771e596bbaea6


port is 8888

open a ssh tunnel on local machine

```{bash}
# Replace <PORT> with the port number you selected in the above step
# Replace <REMOTE_USER> with the remote server username
# Replace <REMOTE_HOST> with your remote server address
ssh -L 8080:localhost:8888 sj003@ssh.cryst.bbk.ac.uk

```

this puts me into pandora

Open a browser from your local machine and navigate to http://localhost:8080/, the Jupyter Notebook web interface. Replace 8080 with your port number used in step 1.

This part just kept getting stuck--turned off firewall but no luck


7 July
Made file that counts distribution of duplicate barcodes. plot

```{r plot count distribution for sample A1}
library(tidyverse)

count_dist <- read_delim(here("menadione_tnseq/count_barcodes.txt"), delim = " ", col_names = F)
colnames(count_dist) <- c( "count", "barcode")

dim(count_dist)
max(count_dist$count, na.rm=T)
#1312199
min(count_dist$count, na.rm=T)
#1000

#exclude first value which is outlier
d <- density(count_dist$count[2:length(count_dist$count)], na.rm=T)
plot(d)
hist(count_dist$count[2:length(count_dist$count)])
```



